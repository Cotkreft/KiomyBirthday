<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Birthday Card Flip</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="card-container">
    <div class="card" onclick="flipCard(this)">
      <div class="card-front">
        <img src="front.png" alt="Front of Card" />
      </div>
      <div class="card-back">
        <img src="inside.png" alt="Inside of Card" />
      </div>
    </div>
  </div>

  <audio id="birthday-audio" src="birthday-audio.mp3"></audio>

  <canvas id="confetti-canvas"></canvas>

  <script>
    const card = document.querySelector('.card');
    const audio = document.getElementById('birthday-audio');
    const canvas = document.getElementById('confetti-canvas');
    const ctx = canvas.getContext('2d');

    let hasFlipped = false;
    let confettiPieces = [];

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    class Confetti {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height - canvas.height;
        this.size = Math.random() * 8 + 4;
        this.speed = Math.random() * 3 + 2;
        this.angle = Math.random() * 360;
        this.color = `hsl(${Math.random() * 360}, 70%, 60%)`;
        this.rotateSpeed = (Math.random() - 0.5) * 10;
      }
      update() {
        this.y += this.speed;
        this.angle += this.rotateSpeed;
        if (this.y > canvas.height) {
          this.y = -this.size;
          this.x = Math.random() * canvas.width;
        }
      }
      draw() {
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate((this.angle * Math.PI) / 180);
        ctx.fillStyle = this.color;
        ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size / 2);
        ctx.restore();
      }
    }

    function createConfetti(num) {
      for (let i = 0; i < num; i++) {
        confettiPieces.push(new Confetti());
      }
    }

    function animateConfetti() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      confettiPieces.forEach((confetti) => {
        confetti.update();
        confetti.draw();
      });
      requestAnimationFrame(animateConfetti);
    }

    function flipCard(cardElement) {
      cardElement.classList.toggle('flipped');
      if (!hasFlipped && cardElement.classList.contains('flipped')) {
        audio.play();
        createConfetti(150);
        animateConfetti();
        hasFlipped = true;

        setTimeout(() => {
          confettiPieces = [];
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }, 5000);
      }
    }
  </script>

</body>
</html>
